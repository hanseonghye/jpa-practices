# 연관관계 매핑

### 1. 엔티티의 연관관계를 매핑할 때는 다음의 세가지 조건을 기준으로 매핑한다.

1. 다중성
2. 방향성
3. 연관관계의 주인

### 2. 보통은 서비스(비즈니스 로직)에서 방향성을 찾는 경우가 많다.

1. 게시판의 경우, 게시판 리스트 화면에서 작성자를 표시해야 하는 경우가 많다. -> 게시판이 주인이 된다.
2. 반대로 특정 사용자의 글들을 가져와야 하는 경우는 많지 않다. 이러한 결정은 개발하는 서비스에 달려있다.
3. 따라서 이 모델은 단반향으로 결정된다. (board -> user)

### 3. 다중성은 방향성이 결정나면 쉽게 결정 할 수 있다.

1. manytoone, onetomany, onetoone을 결정하는 것은쉽다. 참조해야 하는 엔티티 기준으로 결정하면 된다. 연관관계의 주인이 왼쪽에 온다.
2. 즉 Board가 Many, user 가 one, 그리고 board가 주인이 되므로, ManyToOne에 해당한다.

### 4. 단방향에서는 연관관계의 주인을 따지지 않아도 된다.

1. 연관관계가 하나밖에 없기 때문에 관계 설정을 한 필드가 주인이다. --> 개발자 자유?
2. 이 필드에 값 설정에 따라 외래키가 변경되면 관계가 변경되기 때문에 이 필드가 있는 엔티티가 관계의 주인이 되는 것이다.



## 엔티티 설계

- 데이터 베이스 테이블에서는 N:1 관계에서, N쪽에 외래키를 둔다.
- 엔티티에서 또한, N에 해당하는 클래스에 외래키 컬럼을 추가한다.